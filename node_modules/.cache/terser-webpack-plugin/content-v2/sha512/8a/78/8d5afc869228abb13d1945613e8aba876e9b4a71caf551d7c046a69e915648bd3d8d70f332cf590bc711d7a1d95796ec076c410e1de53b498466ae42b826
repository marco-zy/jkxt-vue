{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"dashboard\"],{7159:function(t,e,n){t.exports=n.p+\"static/img/img.146655c9.jpg\"},b3c9:function(t,e,n){\"use strict\";n(\"be3f\")},be3f:function(t,e,n){},e2ad:function(t,e,n){\"use strict\";n.r(e);n(\"7f7f\");var i=function(){var t=this,e=t._self._c;return e(\"div\",[e(\"el-row\",{attrs:{gutter:20,name:\"1\"}},[e(\"el-col\",{staticClass:\"mgb5 mgt5\",attrs:{span:8}},[e(\"el-card\",{attrs:{shadow:\"hover\",\"body-style\":{padding:\"0px\"}}},[e(\"div\",{staticClass:\"grid-content grid-con-1\"},[e(\"img\",{staticClass:\"user-avator\",attrs:{src:n(\"7159\"),alt:\"\"}}),e(\"div\",{staticClass:\"user-info-cont\"},[e(\"div\",{staticClass:\"user-info-name\"},[t._v(t._s(t.name))]),e(\"div\",[t._v(t._s(t.role))])]),e(\"div\",{staticClass:\"user-info-cont1\"},[e(\"div\",[t._v(\"当前时间：\")]),e(\"div\",{staticClass:\"user-info-time\"},[t._v(t._s(t.nowDate))]),e(\"div\",{staticClass:\"user-info-time\"},[t._v(t._s(t.nowTime))])])])])],1),e(\"el-col\",{attrs:{span:16}},[e(\"el-row\",{staticClass:\"mgb5 mgt5\",attrs:{gutter:20}},[e(\"el-col\",{attrs:{span:6}},[e(\"el-card\",{attrs:{shadow:\"hover\",\"body-style\":{padding:\"0px\"}}},[e(\"div\",{staticClass:\"grid-content grid-con-1\",on:{click:this.toProject}},[e(\"i\",{staticClass:\"el-icon-s-flag grid-con-icon\"}),e(\"div\",{staticClass:\"grid-cont-right\"},[e(\"div\",{staticClass:\"grid-num\"},[t._v(t._s(this.projectcount))]),e(\"div\",{staticClass:\"mgt10\"},[t._v(\"项目数\")])])])])],1),e(\"el-col\",{attrs:{span:6}},[e(\"el-card\",{attrs:{shadow:\"hover\",\"body-style\":{padding:\"0px\"}}},[e(\"div\",{staticClass:\"grid-content grid-con-2\",on:{click:this.toMission}},[e(\"i\",{staticClass:\"el-icon-s-claim grid-con-icon\"}),e(\"div\",{staticClass:\"grid-cont-right\"},[e(\"div\",{staticClass:\"grid-num\"},[t._v(t._s(this.missioncount))]),e(\"div\",{staticClass:\"mgt10\"},[t._v(\"任务数\")])])])])],1),e(\"el-col\",{attrs:{span:6}},[e(\"el-card\",{attrs:{shadow:\"hover\",\"body-style\":{padding:\"0px\"}}},[e(\"div\",{staticClass:\"grid-content grid-con-3\",on:{click:this.toDevice}},[e(\"i\",{staticClass:\"el-icon-video-camera-solid grid-con-icon\"}),e(\"div\",{staticClass:\"grid-cont-right\"},[e(\"div\",{staticClass:\"grid-num\"},[t._v(t._s(this.devicecount))]),e(\"div\",{staticClass:\"mgt10\"},[t._v(\"设备数\")])])])])],1),e(\"el-col\",{attrs:{span:6}},[e(\"el-card\",{attrs:{shadow:\"hover\",\"body-style\":{padding:\"0px\"}}},[e(\"div\",{staticClass:\"grid-content grid-con-4\",on:{click:this.toUser}},[e(\"i\",{staticClass:\"el-icon-s-custom grid-con-icon\"}),e(\"div\",{staticClass:\"grid-cont-right\"},[e(\"div\",{staticClass:\"grid-num\"},[t._v(t._s(this.usecount))]),e(\"div\",{staticClass:\"mgt10\"},[t._v(\"用户数\")])])])])],1)],1)],1)],1),e(\"el-col\",{attrs:{span:4}},[e(\"el-card\",{attrs:{shadow:\"hover\"}},[e(\"div\",{staticStyle:{\"text-align\":\"center\",color:\"#909399\",\"margin-bottom\":\"10px\",\"font-size\":\"18px\"}},[t._v(\"列表\")]),e(\"div\",{staticStyle:{height:\"575px\"}},[e(\"el-scrollbar\",{staticStyle:{height:\"100%\"}},[e(\"el-tree\",{ref:\"tree\",staticClass:\"filter-tree\",staticStyle:{height:\"550px\"},attrs:{lazy:\"\",load:t.loadNode,props:t.props,\"node-key\":\"id\",\"filter-node-method\":t.filterNode},on:{\"node-click\":t.handleNodeClick}})],1)],1)])],1),e(\"el-col\",{attrs:{span:20}},[e(\"el-card\",{attrs:{shadow:\"hover\"}},[e(\"div\",{staticStyle:{height:\"610px\"}},[e(\"baidu-map\",{staticClass:\"bm-view\",attrs:{center:this.center,zoom:this.zoom,\"scroll-wheel-zoom\":!0}},[t._l(t.markers,(function(n){return e(\"div\",[e(\"bm-marker\",{attrs:{position:{lng:n.lng,lat:n.lat}},on:{click:function(e){return t.lookDetail(n)}}},[e(\"bm-info-window\",{attrs:{title:n.projectName,position:{lng:n.lng,lat:n.lat},show:n.showFlag},on:{close:function(e){return t.infoWindowClose(n)},open:function(e){return t.infoWindowOpen(n)}}},[e(\"div\",{staticStyle:{\"font-size\":\"11px\"}},[e(\"div\",[t._v(\"\\n                                    编号：\"+t._s(n.projectNo)+\"\\n                                \")]),e(\"div\",[t._v(\"\\n                                    起始时间：\"+t._s(n.startTime)+\"\\n                                \")]),e(\"div\",[t._v(\"\\n                                    负责人：\"+t._s(n.manager)+\"\\n                                \")]),e(\"div\",[t._v(\"\\n                                    状态：\"+t._s(n.status)+\"\\n                                \")])])])],1)],1)})),e(\"bm-scale\",{attrs:{anchor:\"BMAP_ANCHOR_BOTTOM_LEFT\"}}),e(\"bm-navigation\",{attrs:{anchor:\"BMAP_ANCHOR_TOP_LEFT\"}}),e(\"bm-map-type\",{attrs:{\"map-types\":[\"BMAP_NORMAL_MAP\",\"BMAP_HYBRID_MAP\"],anchor:\"BMAP_ANCHOR_TOP_RIGHT\"}}),e(\"bm-boundary\",{attrs:{name:t.boundaryname,strokeWeight:3,strokeColor:\"green\",fillOpacity:\"0\"}})],2)],1)])],1)],1)},o=[],s=(n(\"ac6a\"),n(\"96cf\"),n(\"1da1\")),r=n(\"365c\"),a={name:\"dashboard\",data:function(){return{name:localStorage.getItem(\"ms_username\"),nowDate:\"\",nowTime:\"\",center:{lng:104.969052,lat:33.377164},zoom:5,projectcount:\"\",devicecount:\"\",missioncount:\"\",markers:[],inforWindow:{id:\"\",projectNo:\"\",projectName:\"\",startTime:\"\",manager:\"\",province:\"\",city:\"\",lng:\"\",lat:\"\",status:\"\",createTime:\"\",updateTime:\"\"},boundaryname:\"\",coordination:{lat:\"\",lng:\"\"},doundarycolor:\"\",filterText:\"\",usecount:\"\",props:{label:\"label\",isLeaf:\"isLeaf\"}}},components:{},computed:{role:function(){return\"admin\"===this.name?\"超级管理员\":\"普通用户\"}},created:function(){this.currentTime(),this.proselect(),this.getprovince(),this.dashcount()},mounted:function(){this.currentTime(),this.proselect(),this.getprovince(),this.dashcount()},watch:{filterText:function(t){this.$refs.tree.filter(t)}},methods:{filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},toProject:function(){this.$router.push(\"/Project\"),this.dashcount()},toMission:function(){this.$router.push(\"/Mission\"),this.dashcount()},toDevice:function(){this.$router.push(\"/Device\"),this.dashcount()},toUser:function(){this.$router.push(\"/User\"),this.dashcount()},dashcount:function(){this.procount(),this.devcount(),this.misscount(),this.usercount()},loadNode:function(t,e){0==t.level&&this.loadfirstnode(e),1==t.level&&this.loadcitynode(t,e),2==t.level&&this.loadprojectnode(t,e),3==t.level&&this.loadmissionnode(t,e)},loadfirstnode:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return{level:0},t.next=3,Object(r[\"x\"])();case 3:return n=t.sent,t.abrupt(\"return\",e(n));case 5:case\"end\":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),loadcitynode:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e,n){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={province:e.label},t.next=3,Object(r[\"a\"])(i);case 3:return o=t.sent,t.abrupt(\"return\",n(o));case 5:case\"end\":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),loadprojectnode:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e,n){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={city:e.label},t.next=3,Object(r[\"t\"])(i);case 3:return o=t.sent,t.abrupt(\"return\",n(o));case 5:case\"end\":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),loadmissionnode:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e,n){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),i={projectId:e.data.objId},t.next=4,Object(r[\"p\"])(i);case 4:return o=t.sent,console.log(o),t.abrupt(\"return\",n(o));case 7:case\"end\":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),loaddevicenode:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e,n){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={city:e.label},t.next=3,Object(r[\"t\"])(i);case 3:return o=t.sent,t.abrupt(\"return\",n(o));case 5:case\"end\":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),handleNodeClick:function(t){\"province\"==t.level?(this.center={},this.center=t.label,this.boundaryname=t.label,this.zoom=8):\"city\"==t.level?(this.center={},this.center=t.label,this.boundaryname=t.label,this.zoom=10):\"project\"==t.level&&(this.coordination.lat=t.lat,this.coordination.lng=t.lng,this.center=this.coordination,this.zoom=16)},lookDetail:function(t){t.showFlag=!0,this.inforWindow=t},infoWindowClose:function(t){t.showFlag=!1},infoWindowOpen:function(t){t.showFlag=!0},procount:function(){var t=this;Object(r[\"d\"])().then((function(e){t.projectcount=e}))},devcount:function(){var t=this;Object(r[\"b\"])().then((function(e){t.devicecount=e}))},misscount:function(){var t=this;Object(r[\"c\"])().then((function(e){t.missioncount=e}))},usercount:function(){var t=this;Object(r[\"f\"])().then((function(e){t.usecount=e}))},proselect:function(){var t=this;Object(r[\"e\"])().then((function(e){return[t.markers=e]}))},getprovince:function(){var t=this;Object(r[\"x\"])().then((function(e){t.treeData1=e}))},changeDate:function(){var t=(new Date).getTime();this.data.forEach((function(e,n){var i=new Date(t-864e5*(6-n));e.name=\"\".concat(i.getFullYear(),\"/\").concat(i.getMonth()+1,\"/\").concat(i.getDate())}))},getDate:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getDay(),s=[\"星期日\",\"星期一\",\"星期二\",\"星期三\",\"星期四\",\"星期五\",\"星期六\"],r=t.getHours();r=r<10?\"0\"+r:r;var a=t.getMinutes();a=a<10?\"0\"+a:a;var c=t.getSeconds();c=c<10?\"0\"+c:c,this.nowDate=\"\".concat(e,\"年\").concat(n,\"月\").concat(i,\"日 \").concat(s[o]),this.nowTime=\"\".concat(r,\"时\").concat(a,\"分\").concat(c,\"秒\")},currentTime:function(){var t=this;setInterval((function(){t.getDate()}),500)},handler:function(t){var e=t.BMap,n=t.map;console.log(e,n),this.center.lng=116.404,this.center.lat=39.915,this.zoom=15}}},c=a,l=(n(\"b3c9\"),n(\"2877\")),u=Object(l[\"a\"])(c,i,o,!1,null,\"6fcd96dc\",null);e[\"default\"]=u.exports}}]);","extractedComments":[]}